# –ê—É–¥–∏—Ç `src/store/index.js`

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2025  
**–§–∞–π–ª:** `src/store/index.js`  
**–†–∞–∑–º–µ—Ä:** ~2100 —Å—Ç—Ä–æ–∫  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π Vuex store: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø—Ä–∞–≤–∞, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, –∫—ç—à, –º–µ–Ω—é, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](#–æ–±—â–∞—è-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∏-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å-–º–æ–¥—É–ª–µ–π)
3. [–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#–∑–∞–≥—Ä—É–∑–∫–∞-–∏-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö)
4. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ —Å–æ–±—ã—Ç–∏—è](#—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-–∏-—Å–æ–±—ã—Ç–∏—è)
5. [–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
7. [–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π](#–ø–ª–∞–Ω-–¥–µ–π—Å—Ç–≤–∏–π)

---

## –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: ~80+ –ø–æ–ª–µ–π –≤ `state`, >50 –º—É—Ç–∞—Ü–∏–π, >70 —ç–∫—à–µ–Ω–æ–≤, >40 –≥–µ—Ç—Ç–µ—Ä–æ–≤.
- **–ö—ç—à-—É—Ä–æ–≤–Ω–∏**: localStorage (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏), IndexedDB (–∫—Ä—É–ø–Ω—ã–µ –≤—ã–±–æ—Ä–∫–∏), in-memory (runtime).
- **–ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CacheInvalidator`, `retryWithExponentialBackoff`, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API (–æ–±—ã—á–Ω—ã–π –∏ basement —Ä–µ–∂–∏–º), DTO-–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã.
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è**: 3 —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `createPersistedState` —Å —Ä–∞–∑–Ω—ã–º–∏ `paths`, `filter` –∏ `parser`.
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∫–ª–∞–¥–æ–∫**: listener `storage` + `eventBus` —Å–æ–±—ã—Ç–∏—è (`company-updated`, `cache:invalidate`).

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
- **State**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø—Ä–∞–≤–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ñ–ª–∞–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ company-scoped), —Ñ–∏–ª—å—Ç—Ä—ã, –º–µ–Ω—é, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–±–∞–Ω–∞, —Ñ–ª–∞–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
- **Mutations**: —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π, —Ñ–ª–∞–≥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏, –ª–æ–≥–æ–≤, —Ç–µ–∫—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, –º–µ–Ω—é, —Ñ–∏–ª—å—Ç—Ä–æ–≤; —Å–±—Ä–æ—Å company-–¥–∞–Ω–Ω—ã—Ö –∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∫—ç—à–µ–π.
- **Actions (—è–¥—Ä–æ)**:
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`initializeApp`): –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∞–≤, –º–µ–Ω—é, –≤–∞–ª—é—Ç –∏ –µ–¥–∏–Ω–∏—Ü, –∫–æ–º–ø–∞–Ω–∏–π –∏ —Ç–µ–∫—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–µ–π (`loadCurrentCompany`, `setCurrentCompany`, `loadCompanyData`): –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤, –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏.
  - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ (`invalidateCache`, `onDataCreate/Update/Delete`, `onUserChange`, `onCompanyChange`).
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (global, company-scoped, products search) —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ `loadingFlags` –∏ `waitForLoading`.
- **Getters**: –¥–æ—Å—Ç—É–ø –∫ —Å—É—â–Ω–æ—Å—Ç—è–º, –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –º–µ–Ω—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤.

---

## –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏** (`units`, `currencies`, `users`, —Å—Ç–∞—Ç—É—Å—ã –∏ —Ç.–ø.): localStorage, TTL-–ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `parser` –∏ `reducer`.
- **Company-scoped** (`warehouses`, `cashRegisters`, `clients`, `projects`, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏): –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏, TTL —á–µ—Ä–µ–∑ `CacheInvalidator` –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–±—Ä–æ—Å—ã.
- **–ö—Ä—É–ø–Ω—ã–µ –≤—ã–±–æ—Ä–∫–∏** (`allProductsData`, `clientsData`, `projectsData`): IndexedDB —Å `_meta.timestamp`, –ø—Ä–æ–≤–µ—Ä–∫–æ–π TTL –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è `projectsDataCompanyId` —Ç–µ–∫—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.
- **–°–ª–æ–∏ DTO**: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ DTO –∏–∑ plain-–∫—ç—à–∞ –ø—Ä–∏ –ø—É—Å—Ç–æ–º runtime (clients/projects/products search).
- **–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–∫–µ—Ç–æ–º**: `loadCompanyData` –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (—Å–∫–ª–∞–¥—ã, –∫–∞—Å—Å—ã) –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–µ—Ä–µ–∑ `Promise.allSettled`.

---

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ —Å–æ–±—ã—Ç–∏—è
- **storage listener**: —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `userSettings/persistedState`, –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `currentCompany` –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–∏ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API, –æ—á–∏—â–∞–µ—Ç –∫—ç—à, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.
- **eventBus**:
  - `company-updated`: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –≤–µ—Ä—Å–∏–∏ –ª–æ–≥–æ—Ç–∏–ø–∞.
  - `cache:invalidate`: –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤ `invalidateCache`.
- **–§–ª–∞–≥–∏**: `isSyncingCompanyFromOtherTab` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏; debounce 50 –º—Å –¥–ª—è —Å–æ–±—ã—Ç–∏–π storage.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è vuex-persistedstate

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–ø—Ü–∏–∏

–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø—Ü–∏–∏ `createPersistedState`:

#### ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ):
- `key` - –∫–ª—é—á –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ storage
- `storage` - –æ–±—ä–µ–∫—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (localStorage, sessionStorage, –∫–∞—Å—Ç–æ–º–Ω—ã–π)
- `paths` - –º–∞—Å—Å–∏–≤ –ø—É—Ç–µ–π –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `filter` - —Ñ—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º—É—Ç–∞—Ü–∏–π
- `reducer` - —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- `getState` - —Ñ—É–Ω–∫—Ü–∏—è —á—Ç–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ storage (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É)
- `rehydrated` - –∫–æ–ª–±—ç–∫ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏:
- `assertStorage` - –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ storage
- `fetchBeforeUse` - –æ–ø—Ü–∏—è –¥–ª—è IndexedDB (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π)

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–ø—Ü–∏–π

1. **`assertStorage` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –æ–ø—Ü–∏–µ–π vuex-persistedstate**
   - –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —ç—Ç–æ–π –æ–ø—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 3 –º–µ—Å—Ç–∞—Ö (—Å—Ç—Ä–æ–∫–∏ 1962, 1973, 2109)
   - –ú–æ–∂–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–ª–∞–≥–∏–Ω–æ–º –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

2. **`fetchBeforeUse` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –æ–ø—Ü–∏–µ–π**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è IndexedDB –ø–ª–∞–≥–∏–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 2023)
   - –ù–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è

3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É `reducer` –∏ `paths`**
   - –í –ø–µ—Ä–≤–æ–º –ø–ª–∞–≥–∏–Ω–µ (—Å—Ç—Ä–æ–∫–∏ 1846-1967) —É–∫–∞–∑–∞–Ω—ã `paths`, –Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π `reducer`
   - `reducer` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É `paths`, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `getState` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞**
   - –í–æ –≤—Ç–æ—Ä–æ–º –ø–ª–∞–≥–∏–Ω–µ (—Å—Ç—Ä–æ–∫–∏ 1970-2011) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getState` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞
   - –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥

5. **IndexedDB storage —Å async –º–µ—Ç–æ–¥–∞–º–∏**
   - `indexedDBStorage` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç async –º–µ—Ç–æ–¥—ã (`getItem`, `setItem`, `removeItem`)
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `vuex-persistedstate` –æ–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
   - –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ vuex-persistedstate

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `assertStorage` –∏ `fetchBeforeUse`**
   - –õ–∏–±–æ –Ω–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é/–∏—Å—Ö–æ–¥–Ω–∏–∫–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É
   - –õ–∏–±–æ —É–¥–∞–ª–∏—Ç—å —ç—Ç–∏ –æ–ø—Ü–∏–∏ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–Ω–∞—á–µ

2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–≤–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞**
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É `paths` –∏ `reducer`
   - –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `paths`, –ª–∏–±–æ —Ç–æ–ª—å–∫–æ `reducer`

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å async IndexedDB**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `vuex-persistedstate` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å async storage
   - –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–µ—Ä—Ç–∫–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥

4. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ–ø—Ü–∏–π**
   - –ï—Å–ª–∏ –æ–ø—Ü–∏–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å fallback –ª–æ–≥–∏–∫—É

---

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
1. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ –Ω–µ—É—Å–ø–µ—Ö–µ –∑–∞–≥—Ä—É–∑–æ–∫**: `loadCompanyData` —Å—Ç–∞–≤–∏—Ç `companyData` –≤ `false` –≤ `finally` –¥–∞–∂–µ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –ø—Ä–æ–≤–∞–ª–µ; –Ω–µ—Ç —è–≤–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–∫–∏ –¥–ª—è –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è.
2. **–°—Ç–æ–π–∫–æ—Å—Ç—å –∫ —á–∞—Å—Ç–∏—á–Ω—ã–º —Å–±–æ—è–º –ø—Ä–∞–≤**: `refreshUserPermissions` –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –Ω–µ —á–∏—Å—Ç–∏—Ç state; –≤–æ–∑–º–æ–∂–Ω–∞ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è user/permissions –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏.
3. **–°–º–µ–Ω–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ –æ—Ç–∫–∞—Ç–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π**: `setCurrentCompany` –ø—Ä–∏ –æ—à–∏–±–∫–µ —É–∂–µ –º–æ–≥ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥–∏, –Ω–æ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ.

### üü° –°—Ä–µ–¥–Ω–∏–µ
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ–ø—Ü–∏–π vuex-persistedstate**: `assertStorage` –∏ `fetchBeforeUse` –Ω–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏; –º–æ–≥—É—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞.
5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É `paths` –∏ `reducer`**: –≤ –ø–µ—Ä–≤–æ–º –ø–ª–∞–≥–∏–Ω–µ —É–∫–∞–∑–∞–Ω—ã `paths`, –Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π `reducer`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É `paths`.
6. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `loadClients`**: –ø—Ä–æ–≤–µ—Ä–∫–∞ snake/camel –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–ª–Ω–æ–º—É —Å–±—Ä–æ—Å—É –∫—ç—à–∞; –Ω–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∑–∞–ø–∏—Å—å, –ª–æ–≥–∏–∫–∞ —Ç—Ä—É–¥–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è.
7. **–ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: `logRoundingGetter`/`logCompanyRoundingSettings` –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—é—Ç; –∫–æ–¥ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ, –≤–≤–æ–¥–∏—Ç —à—É–º.
8. **–ï–¥–∏–Ω–∏—á–Ω—ã–µ –º–µ—Å—Ç–∞ –±–µ–∑ retry/–æ–±—Ä–∞–±–æ—Ç–∫–∏**: —á–∞—Å—Ç—å —ç–∫—à–µ–Ω–æ–≤ –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ `retryWithExponentialBackoff`, –Ω–æ –Ω–µ –≤—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ get/post –≤ –º–µ–Ω—é/–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—á–Ω—ã–π –≤—ã–∑–æ–≤).
9. **–ú–µ–Ω—é –∏ –∫—ç—à –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏**: –Ω–µ—Ç —è–≤–Ω–æ–π —Å—Ö–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–π/–≤–µ—Ä—Å–∏–∏ –¥–ª—è localStorage –º–µ–Ω—é; –≤–æ–∑–º–æ–∂–µ–Ω –¥—Ä–µ–π—Ñ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
10. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å async IndexedDB**: `indexedDBStorage` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç async –º–µ—Ç–æ–¥—ã, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `vuex-persistedstate` –æ–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ; —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã.

### üü¢ –ú–µ–ª–∫–∏–µ
8. **–ù–µ—è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ localStorage –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ IndexedDB**: –≤ parser –¥–ª—è `projectsData` —á–∏—Ç–∞–µ—Ç—Å—è localStorage, –æ—à–∏–±–∫–∏ –≥–ª—É—à–∞—Ç—Å—è; –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Ç–∏—Ö–∏–π —Å–±–æ–π.
9. **–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö**: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è clientType/cashRegister —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –º–µ–∂–¥—É getter –∏ mutation; –º–æ–∂–Ω–æ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å.
10. **–°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**: store —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º) ‚Äî –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏/–∫—ç—à–∞
1. –í–≤–µ—Å—Ç–∏ –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–≥—Ä—É–∑–æ–∫ (–≤–æ–∑–≤—Ä–∞—Ç `{ ok, error }`), —á—Ç–æ–±—ã `loadCompanyData` –º–æ–≥ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Ö–Ω–µ–º—É —É—Ä–æ–≤–Ω—é –æ —á–∞—Å—Ç–∏—á–Ω–æ–º –∏–ª–∏ –ø–æ–ª–Ω–æ–º –ø—Ä–æ–≤–∞–ª–µ, –∏ –Ω–µ —Å—á–∏—Ç–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —É—Å–ø–µ—à–Ω–æ.
2. –î–ª—è `refreshUserPermissions` ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ñ–æ–ª–ª–±–µ–∫–∞: –ª–∏–±–æ –º—è–≥–∫–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ñ–ª–∞–≥–æ–º `stale`, –ª–∏–±–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å user/permissions –∏ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∞—É—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ.
3. –í `setCurrentCompany` ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –æ—á–∏—Å—Ç–∫—É/—Å–º–µ–Ω—É –∫—ç—à–∞ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (–∏–ª–∏ –Ω–µ –º–µ–Ω—è—Ç—å –µ–≥–æ –¥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è).

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –û–±—Å–ª—É–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ vuex-persistedstate**:
   - –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏ (`assertStorage`, `fetchBeforeUse`)
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–≤–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ (—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `paths`/`reducer`)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å async IndexedDB storage
   - –î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ–ø—Ü–∏–π
5. –í—ã–Ω–µ—Å—Ç–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞ –∑–∞–ø–∏—Å–∏ –≤ –∫—ç—à (snake ‚Üí camel) –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞; —É–ø—Ä–æ—Å—Ç–∏—Ç—å –≤–µ—Ç–∫–∏ –≤ `loadClients`.
6. –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `logRounding*`; –µ—Å–ª–∏ –ª–æ–≥ –Ω–µ –Ω—É–∂–µ–Ω ‚Äî —É–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤—ã–∑–æ–≤—ã.
7. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å/–º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è localStorage –º–µ–Ω—é –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (–∫–ª—é—á —Å –≤–µ—Ä—Å–∏–µ–π, —Å–±—Ä–æ—Å –ø—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).
8. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Ñ–∏–ª—å—Ç—Ä–æ–≤ (clientType/cashRegister) –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ –∏–ª–∏ —Å–ª–æ–µ.

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
8. –†–∞–∑–¥–µ–ª–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ store: –≤—ã–Ω–µ—Å—Ç–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏/—Ñ–∏–ª—å—Ç—Ä—ã/–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å—ã/—É—Ç–∏–ª–∏—Ç—ã, –æ—Å—Ç–∞–≤–∏–≤ store –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–º.
9. –î–ª—è –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π helper —Å retry/–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫ (–∫–æ–ª-–≤–æ –ø–æ–ø—ã—Ç–æ–∫, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å).
10. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏/—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –¥–ª—è `Promise.allSettled` –∑–∞–≥—Ä—É–∑–æ–∫, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–∞–ª—ã.

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1 (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
1. –û–±–Ω–æ–≤–∏—Ç—å `loadCompanyData`: –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ç—É—Å, –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Ñ–ª–∞–≥ —É—Å–ø–µ—Ö–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ; –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ early-exit –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –ø—Ä–æ–≤–∞–ª–µ.
2. –í `refreshUserPermissions`: –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–µ (stale –∏–ª–∏ logout), —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ—ë.
3. –í `setCurrentCompany`: –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ—á–∏—Å—Ç–∫—É –∫—ç—à–∞ –¥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞; –ø—Ä–∏ –æ—à–∏–±–∫–µ –Ω–µ –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### –≠—Ç–∞–ø 2 (–æ–±—Å–ª—É–∂–∏–≤–∞–µ–º–æ—Å—Ç—å)
4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é vuex-persistedstate**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `assertStorage` –∏ `fetchBeforeUse` –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –ø–ª–∞–≥–∏–Ω–∞
   - –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–π –ø–ª–∞–≥–∏–Ω (—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `paths`/`reducer`)
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å async IndexedDB storage
5. –†–µ—Ñ–∞–∫—Ç–æ—Ä `loadClients`: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∑–∞–ø–∏—Å—å, —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏ snake/camel, –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π –ª–æ–≥/–º–µ—Ç—Ä–∏–∫—É –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏.
6. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–æ–≥-—Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ–ª–∞–≥–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
7. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –¥–ª—è –º–µ–Ω—é –∏ persisted state; –ø—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ ‚Äî –º—è–≥–∫–∏–π —Å–±—Ä–æ—Å —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º.

### –≠—Ç–∞–ø 3 (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞)
7. –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ store –≤ —Å–µ—Ä–≤–∏—Å—ã/—É—Ç–∏–ª–∏—Ç—ã (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é).
8. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ helper —Å retry/–º–µ—Ç—Ä–∏–∫–∞–º–∏.
9. –ü–æ–∫—Ä—ã—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞–º–∏ store (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–º–µ–Ω–∞ –∫–æ–º–ø–∞–Ω–∏–∏, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ IndexedDB/localStorage).

